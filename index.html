<?php

if(isset($_POST['search']))
{
    $valueToSearch = $_POST['valueToSearch'];
    // search in all table columns
    // using concat mysql function
    $query = "SELECT * FROM `student` WHERE(`stdFirstName`, `stdLastName`, `stdCity`, `stdNo`) LIKE '%".$valueToSearch."%'";
    $search_result = filterTable($query);
    
}
 else {
    $query = "SELECT * FROM `student`";
    $search_result = filterTable($query);
}

// function to connect and execute the query
function filterTable($query)
{
    $host="localhost";
$port=3306;
$socket="";
$user="root";
$password="";
$dbname="university";

$con = new mysqli($host, $user, $password, $dbname, $port, $socket)
	or die ('Could not connect to the database server' . mysqli_connect_error());

//$con->close();

    $filter_Result = mysqli_query($connect, $query);
    return $filter_Result;
}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
<head>
<title>Capstone Test Website</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<link href="style.css" rel="stylesheet" type="text/css" />
	<style>
            table,tr,th,td
            {
                border: 1px solid black;
            }
        </style>
</head>
<body>
	
	<form>
            <input type="text" name="valueToSearch" placeholder="Value To Search"><br><br>
            <input type="submit" name="search" value="Filter"><br><br>
            
            <table>
                <tr>
                    <th>Student Number</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>City</th>
                </tr>

                <?php while($row = mysqli_fetch_array($search_result)):?>
                <tr>
                    <td><?php echo $row['stdNo'];?></td>
                    <td><?php echo $row['stdFirstName'];?></td>
                    <td><?php echo $row['stdLastName'];?></td>
                    <td><?php echo $row['stdCity'];?></td>
                </tr>
                <?php endwhile;?>
            </table>
        </form>
	

   
<div id="container">
  <div id="header">
    <h1>Jacob Terry Capstone Web Hosting Pt. 2</h1>
  </div>
  <div id="title">
    <p>Grass Template</p>
	</div>
  
  <div id="leftcol">
    <h2>Navigate</h2>
    <p>Welcome to your two column right sided layout. </p>
    <div id="navcontainer">
      <ul id="navlist">
        <li id="active"><a href="#" id="current">Item one</a></li>
        <li><a href="#">Item two</a></li>
        <li><a href="#">Item three</a></li>
        <li><a href="#">Item four</a></li>
        <li><a href="#">Item five</a></li>
      </ul>
    </div>
    <ul>
      <li>Lorem ipsum dolor sit amet.</li>
      <li>Mauris consectetuer congue ante.</li>
      <li>Sed pulvinar consectetuer risus.</li>
      <li>Maecenas placerat laoreet nisi.</li>
      <li>Donec faucibus ligula non purus.</li>
    </ul>
  </div>
  <div id="content">
    <h2>Welcome</h2>
    <p><em>All images were created by me so feel free to use them if you wish. The page has been tested in Mozilla and IE6/7. The page validates as XHTML 1.0 Transitional using valid CSS. This is a <a href="#">link</a> to nowhere.</em> For more templates visit <a href="http://www.mitchinson.net">my website</a>.</p>
    <p><img src="images/image.jpg" alt="" /> Fusce lorem. Suspendisse sit amet lectus. Nam laoreet, diam vel consequat consequat, eros nunc consectetuer libero, non elementum urna dui sed wisi. Phasellus vitae sapien. Nunc vestibulum malesuada dolor. Phasellus commodo neque nec purus. Praesent nec wisi id augue pulvinar ultrices. Ut malesuada, orci eget bibendum varius, sem ligula ultricies urna, at pharetra justo elit in diam. Vestibulum sit amet felis. In velit. Aenean sagittis pede vitae sem. In hac habitasse platea dictumst. Sed eleifend molestie est. Phasellus enim est, facilisis vel, placerat facilisis, ultricies sit amet, erat. Nullam sit amet velit et wisi dignissim placerat. Phasellus non lorem nec nunc aliquam lobortis. Nullam nec lectus. </p>
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam nec nibh in massa pellentesque scelerisque. Nullam in odio. Curabitur accumsan aliquet leo. Sed id nibh. Sed tempor. Integer ultricies. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam nec nibh in massa pellentesque scelerisque. Nullam in odio. Curabitur accumsan aliquet leo. Sed id nibh. Sed tempor. Integer ultricies.</p>
  </div>
  <div id="footer">
    <p><a href="#">homepage</a> | <a href="mailto:denise@mitchinson.net">contact</a> | <a href="http://validator.w3.org/check?uri=referer">html</a> | <a href="http://jigsaw.w3.org/css-validator">css</a> | &copy; 2007 Anyone | Design by <a href="http://www.mitchinson.net"> www.mitchinson.net</a> | This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a></p>
  </div>
</div>
   
   <?php.print ("$output");?>
   
</body>
</html>
